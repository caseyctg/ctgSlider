(function($){$.fn.ctgslider=function(options){var settings=$.extend({'timelength':5000,'showbuttons':'Y','minibuttons':'Y','minibuttonopacity':.5,'centerbuttons':'Y','alignrightnextbutton':'Y','btnoffset':-6,'effects':'slow','captioneffects':'slow','captionclass':'.Caption','usenumbers':'Y','minibtnimagesrc':'images/star.png','usecaptions':'Y'},options);return this.each(function(){if(typeof options.timelength==="undefined"||options.timelength===null)options.timelength=5000;if(typeof options.showbuttons==="undefined"||options.showbuttons===null)options.showbuttons='Y';if(typeof options.minibuttons==="undefined"||options.minibuttons===null)options.minibuttons='Y';if(typeof options.minibuttonopacity==="undefined"||options.minibuttonopacity===null)options.minibuttonopacity=.5;if(typeof options.centerbuttons==="undefined"||options.centerbuttons===null)options.centerbuttons='Y';if(typeof options.alignrightnextbutton==="undefined"||options.alignrightnextbutton===null)options.alignrightnextbutton='Y';if(typeof options.btnoffset==="undefined"||options.btnoffset===null)options.btnoffset=0;if(typeof options.effects==="undefined"||options.effects===null)options.effects='slow';if(typeof options.captioneffects==="undefined"||options.captioneffects===null)options.captioneffects='slow';if(typeof options.captionclass==="undefined"||options.captionclass===null)options.captionclass='.Caption';if(typeof options.usenumbers==="undefined"||options.usenumbers===null)options.usenumbers='Y';if(typeof options.minibtnimagesrc==="undefined"||options.minibtnimagesrc===null)options.minibtnimagesrc='Y';if(typeof options.usecaptions==="undefined"||options.usecaptions===null)options.usecaptions='Y';var selectorclass=jQuery(this);var imagelength=selectorclass.find("img").length;InitHide();StartTimer();var int;var counter=0;var SlideNum=selectorclass.find("img").length;var countersubtractone;function StartTimer(){int=self.setInterval(NextPicture,options.timelength)}function ResetTimer(){window.clearInterval(int)}function InitHide(){var SlideNum=selectorclass.find("img").length;selectorclass.find("img:gt(0)").hide();if(options.usecaptions=='Y'){selectorclass.find(options.captionclass+":gt(0)").hide();selectorclass.find(".Caption:lt(1)").css("display","block")}if(options.showbuttons=='Y'){if(options.usecaptions=='Y'){selectorclass.find(options.captionclass+":last-child").after('<div id=\"PrevBtn\"></div><div id=\"NextBtn\"></div>')}else{selectorclass.find("img:last-child").after('<div id=\"PrevBtn\"></div><div id=\"NextBtn\"></div>')}selectorclass.find('#PrevBtn').bind('click',PrevPicture);selectorclass.find('#NextBtn').bind('click',NextPicture);var PrevBtnH=selectorclass.find('#PrevBtn').height();var PrevBtnW=selectorclass.find('#PrevBtn').width();var SliderH=selectorclass.height();var SliderW=selectorclass.width();var SliderW2=SliderW-PrevBtnW;var BtnHeight=selectorclass.find('#PrevBtn').css('top');var PrevBtnH2=SliderH/2-PrevBtnH/2;selectorclass.find('#PrevBtn').css('backgroundPosition',"left center");selectorclass.find('#NextBtn').css('backgroundPosition',"left center");if(options.centerbuttons=='Y'){selectorclass.find('#PrevBtn').css("top",PrevBtnH2);selectorclass.find('#NextBtn').css("top",PrevBtnH2)}else{selectorclass.find('#NextBtn').css("top",BtnHeight)}if(options.alignrightnextbutton=='Y'){selectorclass.find('#NextBtn').css("left",SliderW2-options.btnoffset);selectorclass.find('#PrevBtn').css("left",options.btnoffset)}else{selectorclass.find('#NextBtn').css("left",PrevBtnW+10)}}if(options.minibuttons=='Y'){if(options.showbuttons=='Y'){selectorclass.find("#NextBtn:last-child").after('<div id=\"MiniButtons\"><div class=\"MiniInner\"></div></div>')}else{selectorclass.find("img:last-child").after('<div id=\"MiniButtons\"><div class=\"MiniInner\"></div></div>')}if(options.usenumbers=='Y'){var i=parseInt(SlideNum)+1;selectorclass.find("img").each(function(){i--;selectorclass.find('.MiniInner').after("<div class=\"MiniBtn\">"+i+"</div>")})}else{selectorclass.find("img").each(function(){selectorclass.find('.MiniInner').after("<div class=\"MiniBtn\"></div>")})}if(options.minibtnimagesrc!='Y'){selectorclass.find('.MiniBtn').css('background','none');selectorclass.find('.MiniBtn').css('background-repeat','no-repeat');selectorclass.find('.MiniBtn').css('background-image','url('+options.minibtnimagesrc+')')}selectorclass.find(".MiniBtn:eq(0)").animate({opacity:1});selectorclass.find(".MiniBtn:gt(0)").animate({opacity:options.minibuttonopacity});selectorclass.find(".MiniBtn:lt(0)").animate({opacity:options.minibuttonopacity})}};function NextPicture(){counter=counter+1;countersubtractone=counter-1;selectorclass.find("img:eq("+countersubtractone+")").hide();selectorclass.find("img:eq("+counter+")").show(options.effects);if(options.usecaptions=='Y'){selectorclass.find(options.captionclass+":eq("+countersubtractone+")").hide();selectorclass.find(options.captionclass+":eq("+counter+")").show(options.captioneffects)}if(options.minibuttons=='Y'){selectorclass.find('.MiniBtn:eq('+counter+')').animate({opacity:1});selectorclass.find('.MiniBtn:gt('+counter+')').animate({opacity:options.minibuttonopacity});selectorclass.find('.MiniBtn:lt('+counter+')').animate({opacity:options.minibuttonopacity})}if(parseFloat(counter)==parseFloat(SlideNum)){counter=0;selectorclass.find("img:eq(0)").show(options.effects);if(options.usecaptions=='Y'){selectorclass.find(options.captionclass+":eq(0)").show(options.captioneffects)}if(options.minibuttons=='Y'){selectorclass.find('.MiniBtn:eq('+counter+')').animate({opacity:1});selectorclass.find('.MiniBtn:gt('+counter+')').animate({opacity:options.minibuttonopacity});selectorclass.find('.MiniBtn:lt('+counter+')').animate({opacity:options.minibuttonopacity})}};ResetTimer();StartTimer()}function PrevPicture(){if(counter==0){counter=SlideNum-1;countersubtractone=0}else{counter=counter-1;countersubtractone=counter+1}selectorclass.find('img:eq('+countersubtractone+')').hide();selectorclass.find('img:eq('+counter+')').show(options.effects);if(options.usecaptions=='Y'){selectorclass.find(options.captionclass+':eq('+countersubtractone+')').hide();selectorclass.find(options.captionclass+':eq('+counter+')').show(options.captioneffects)}if(options.minibuttons=='Y'){selectorclass.find('.MiniBtn:eq('+counter+')').animate({opacity:1});selectorclass.find('.MiniBtn:gt('+counter+')').animate({opacity:options.minibuttonopacity});selectorclass.find('.MiniBtn:lt('+counter+')').animate({opacity:options.minibuttonopacity})}if(counter==SlideNum){counter=0;selectorclass.find('img:eq(0)').show(options.effects);if(options.usecaptions=='Y'){selectorclass.find(options.captionclass+':eq(0)').show(options.captioneffects)}if(options.minibuttons=='Y'){selectorclass.find('.MiniBtn:eq('+counter+')').animate({opacity:1});selectorclass.find('.MiniBtn:gt('+counter+')').animate({opacity:options.minibuttonopacity});selectorclass.find('.MiniBtn:lt('+counter+')').animate({opacity:options.minibuttonopacity})}};ResetTimer();StartTimer()}if(options.minibuttons=='Y'){selectorclass.find('.MiniBtn').click(MiniBtnClicker)}function MiniBtnClicker(){var selectedIndex=jQuery(this).index()-1;selectorclass.find('img:lt('+selectedIndex+')').hide();selectorclass.find('img:gt('+selectedIndex+')').hide();selectorclass.find('img:eq('+selectedIndex+')').show(options.effects);selectorclass.find('.MiniBtn img').show(options.effects);if(options.usecaptions=='Y'){selectorclass.find(options.captionclass+':lt('+selectedIndex+')').hide();selectorclass.find(options.captionclass+':gt('+selectedIndex+')').hide();selectorclass.find(options.captionclass+':eq('+selectedIndex+')').show(options.captioneffects)}selectorclass.find('.MiniBtn:eq('+selectedIndex+')').animate({opacity:1});selectorclass.find('.MiniBtn:gt('+selectedIndex+')').animate({opacity:options.minibuttonopacity});selectorclass.find('.MiniBtn:lt('+selectedIndex+')').animate({opacity:options.minibuttonopacity});counter=selectedIndex;countersubtractone=selectedIndex-1;ResetTimer();StartTimer()}})}})(jQuery);